<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yf.psp.db.postgres.company.dao.TblCompanyMapper">
  <resultMap id="BaseResultMap" type="com.yf.psp.db.postgres.company.TblCompany">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="company_id" jdbcType="BIGINT" property="companyId" />
    <result column="company_name" jdbcType="VARCHAR" property="companyName" />
    <result column="company_qualification" jdbcType="VARCHAR" property="companyQualification" />
    <result column="unified_social_credit_code" jdbcType="VARCHAR" property="unifiedSocialCreditCode" />
    <result column="register_area" jdbcType="VARCHAR" property="registerArea" />
    <result column="address_nj" jdbcType="VARCHAR" property="addressNj" />
    <result column="register_capital" jdbcType="VARCHAR" property="registerCapital" />
    <result column="legal_person" jdbcType="VARCHAR" property="legalPerson" />
    <result column="legal_person_identity_no" jdbcType="VARCHAR" property="legalPersonIdentityNo" />
    <result column="legal_person_authorizer" jdbcType="VARCHAR" property="legalPersonAuthorizer" />
    <result column="authorizer_phone_no" jdbcType="VARCHAR" property="authorizerPhoneNo" />
    <result column="authorizer_email" jdbcType="VARCHAR" property="authorizerEmail" />
    <result column="business_scope" jdbcType="VARCHAR" property="businessScope" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="status" jdbcType="SMALLINT" property="status" />
    <result column="audit_status" jdbcType="SMALLINT" property="auditStatus" />
    <result column="rela_company_id" jdbcType="INTEGER" property="relaCompanyId" />
    <result column="delete_flag" jdbcType="SMALLINT" property="deleteFlag" />
    <result column="delete_time" jdbcType="TIMESTAMP" property="deleteTime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="audit_time" jdbcType="TIMESTAMP" property="auditTime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    company_id, company_name, company_qualification, unified_social_credit_code, register_area, 
    address_nj, register_capital, legal_person, legal_person_identity_no, legal_person_authorizer, 
    authorizer_phone_no, authorizer_email, business_scope, remark, status, audit_status, 
    rela_company_id, delete_flag, delete_time, create_time, audit_time
  </sql>



  <select id="getByRelaCompanyId" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    from tbl_company
    where rela_company_id = #{companyId,jdbcType=BIGINT}
  </select>

  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from tbl_company
    where company_id = #{companyId,jdbcType=BIGINT}
  </select>

  <select id="listByPage" parameterType="com.yf.psp.db.util.plugin.PageByPageNo" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    from tbl_company a
    where a.delete_flag=0
    <if test="params.companyName != null">
      and a.company_name like '%'||#{params.companyName}||'%'
    </if>
    <if test="params.unifiedSocialCreditCode != null">
      and a.unified_social_credit_code like '%'||#{params.unifiedSocialCreditCode}||'%'
    </if>
    <if test="params.companyLabel != null">
      and exists (select 1 from tbl_company_label_rela b where b.company_id=a.company_id and b.label_id=#{params.companyLabel})
    </if>
    <if test="params.queryType == 1">
      and a.rela_company_id is null
     </if>
    <if test="params.queryType == 2">
      and a.rela_company_id is null and not exists(select 1 from tbl_company c where c.rela_company_id=a.company_id and audit_status=1)
    </if>
    <if test="params.queryType == 3">
      and a.rela_company_id is null and exists(select 1 from tbl_company d where d.rela_company_id=a.company_id and audit_status=1)
    </if>
    <if test="params.queryType == 4">
      and a.rela_company_id is not null
    </if>
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from tbl_company
    where company_id = #{companyId,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.yf.psp.db.postgres.company.TblCompany">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into tbl_company (company_id, company_name, company_qualification, 
      unified_social_credit_code, register_area, 
      address_nj, register_capital, legal_person, 
      legal_person_identity_no, legal_person_authorizer, 
      authorizer_phone_no, authorizer_email, business_scope, 
      remark, status, audit_status, 
      rela_company_id, delete_flag, delete_time, 
      create_time,audit_time)
    values (#{companyId,jdbcType=BIGINT}, #{companyName,jdbcType=VARCHAR}, #{companyQualification,jdbcType=VARCHAR}, 
      #{unifiedSocialCreditCode,jdbcType=VARCHAR}, #{registerArea,jdbcType=VARCHAR}, 
      #{addressNj,jdbcType=VARCHAR}, #{registerCapital,jdbcType=VARCHAR}, #{legalPerson,jdbcType=VARCHAR}, 
      #{legalPersonIdentityNo,jdbcType=VARCHAR}, #{legalPersonAuthorizer,jdbcType=VARCHAR}, 
      #{authorizerPhoneNo,jdbcType=VARCHAR}, #{authorizerEmail,jdbcType=VARCHAR}, #{businessScope,jdbcType=VARCHAR}, 
      #{remark,jdbcType=VARCHAR}, #{status,jdbcType=SMALLINT}, #{auditStatus,jdbcType=SMALLINT}, 
      #{relaCompanyId,jdbcType=INTEGER}, #{deleteFlag,jdbcType=SMALLINT}, #{deleteTime,jdbcType=TIMESTAMP}, 
      #{createTime,jdbcType=TIMESTAMP}),#{auditTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.yf.psp.db.postgres.company.TblCompany" useGeneratedKeys="true"
          keyProperty="companyId">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into tbl_company
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="companyId != null">
        company_id,
      </if>
      <if test="companyName != null">
        company_name,
      </if>
      <if test="companyQualification != null">
        company_qualification,
      </if>
      <if test="unifiedSocialCreditCode != null">
        unified_social_credit_code,
      </if>
      <if test="registerArea != null">
        register_area,
      </if>
      <if test="addressNj != null">
        address_nj,
      </if>
      <if test="registerCapital != null">
        register_capital,
      </if>
      <if test="legalPerson != null">
        legal_person,
      </if>
      <if test="legalPersonIdentityNo != null">
        legal_person_identity_no,
      </if>
      <if test="legalPersonAuthorizer != null">
        legal_person_authorizer,
      </if>
      <if test="authorizerPhoneNo != null">
        authorizer_phone_no,
      </if>
      <if test="authorizerEmail != null">
        authorizer_email,
      </if>
      <if test="businessScope != null">
        business_scope,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="auditStatus != null">
        audit_status,
      </if>
      <if test="relaCompanyId != null">
        rela_company_id,
      </if>
      <if test="deleteFlag != null">
        delete_flag,
      </if>
      <if test="deleteTime != null">
        delete_time,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="auditTime != null">
        audit_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="companyId != null">
        #{companyId,jdbcType=BIGINT},
      </if>
      <if test="companyName != null">
        #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="companyQualification != null">
        #{companyQualification,jdbcType=VARCHAR},
      </if>
      <if test="unifiedSocialCreditCode != null">
        #{unifiedSocialCreditCode,jdbcType=VARCHAR},
      </if>
      <if test="registerArea != null">
        #{registerArea,jdbcType=VARCHAR},
      </if>
      <if test="addressNj != null">
        #{addressNj,jdbcType=VARCHAR},
      </if>
      <if test="registerCapital != null">
        #{registerCapital,jdbcType=VARCHAR},
      </if>
      <if test="legalPerson != null">
        #{legalPerson,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonIdentityNo != null">
        #{legalPersonIdentityNo,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonAuthorizer != null">
        #{legalPersonAuthorizer,jdbcType=VARCHAR},
      </if>
      <if test="authorizerPhoneNo != null">
        #{authorizerPhoneNo,jdbcType=VARCHAR},
      </if>
      <if test="authorizerEmail != null">
        #{authorizerEmail,jdbcType=VARCHAR},
      </if>
      <if test="businessScope != null">
        #{businessScope,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=SMALLINT},
      </if>
      <if test="auditStatus != null">
        #{auditStatus,jdbcType=SMALLINT},
      </if>
      <if test="relaCompanyId != null">
        #{relaCompanyId,jdbcType=INTEGER},
      </if>
      <if test="deleteFlag != null">
        #{deleteFlag,jdbcType=SMALLINT},
      </if>
      <if test="deleteTime != null">
        #{deleteTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditTime != null">
        #{auditTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.yf.psp.db.postgres.company.TblCompany">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tbl_company
    <set>
      <if test="companyName != null">
        company_name = #{companyName,jdbcType=VARCHAR},
      </if>
      <if test="companyQualification != null">
        company_qualification = #{companyQualification,jdbcType=VARCHAR},
      </if>
      <if test="unifiedSocialCreditCode != null">
        unified_social_credit_code = #{unifiedSocialCreditCode,jdbcType=VARCHAR},
      </if>
      <if test="registerArea != null">
        register_area = #{registerArea,jdbcType=VARCHAR},
      </if>
      <if test="addressNj != null">
        address_nj = #{addressNj,jdbcType=VARCHAR},
      </if>
      <if test="registerCapital != null">
        register_capital = #{registerCapital,jdbcType=VARCHAR},
      </if>
      <if test="legalPerson != null">
        legal_person = #{legalPerson,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonIdentityNo != null">
        legal_person_identity_no = #{legalPersonIdentityNo,jdbcType=VARCHAR},
      </if>
      <if test="legalPersonAuthorizer != null">
        legal_person_authorizer = #{legalPersonAuthorizer,jdbcType=VARCHAR},
      </if>
      <if test="authorizerPhoneNo != null">
        authorizer_phone_no = #{authorizerPhoneNo,jdbcType=VARCHAR},
      </if>
      <if test="authorizerEmail != null">
        authorizer_email = #{authorizerEmail,jdbcType=VARCHAR},
      </if>
      <if test="businessScope != null">
        business_scope = #{businessScope,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=SMALLINT},
      </if>
      <if test="auditStatus != null">
        audit_status = #{auditStatus,jdbcType=SMALLINT},
      </if>
      <if test="relaCompanyId != null">
        rela_company_id = #{relaCompanyId,jdbcType=INTEGER},
      </if>
      <if test="deleteFlag != null">
        delete_flag = #{deleteFlag,jdbcType=SMALLINT},
      </if>
      <if test="deleteTime != null">
        delete_time = #{deleteTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="auditTime != null">
        audit_time = #{auditTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where company_id = #{companyId,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.yf.psp.db.postgres.company.TblCompany">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update tbl_company
    set company_name = #{companyName,jdbcType=VARCHAR},
      company_qualification = #{companyQualification,jdbcType=VARCHAR},
      unified_social_credit_code = #{unifiedSocialCreditCode,jdbcType=VARCHAR},
      register_area = #{registerArea,jdbcType=VARCHAR},
      address_nj = #{addressNj,jdbcType=VARCHAR},
      register_capital = #{registerCapital,jdbcType=VARCHAR},
      legal_person = #{legalPerson,jdbcType=VARCHAR},
      legal_person_identity_no = #{legalPersonIdentityNo,jdbcType=VARCHAR},
      legal_person_authorizer = #{legalPersonAuthorizer,jdbcType=VARCHAR},
      authorizer_phone_no = #{authorizerPhoneNo,jdbcType=VARCHAR},
      authorizer_email = #{authorizerEmail,jdbcType=VARCHAR},
      business_scope = #{businessScope,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      status = #{status,jdbcType=SMALLINT},
      audit_status = #{auditStatus,jdbcType=SMALLINT},
      rela_company_id = #{relaCompanyId,jdbcType=INTEGER},
      delete_flag = #{deleteFlag,jdbcType=SMALLINT},
      delete_time = #{deleteTime,jdbcType=TIMESTAMP},
      create_time = #{createTime,jdbcType=TIMESTAMP},
    audit_time = #{auditTime,jdbcType=TIMESTAMP}
    where company_id = #{companyId,jdbcType=BIGINT}
  </update>
</mapper>